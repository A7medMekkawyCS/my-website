// بيانات الأسئلة
const questionsData = {
  "mcqQuestions": [
    {
      "question": "من القائد الذي بدأ بفتح برقة بعد فتح مصر؟",
      "options": ["معاوية بن أبي سفيان", "عقبة بن نافع", "عمرو بن العاص", "عبد الله بن سعد"],
      "answer": "عمرو بن العاص"
    },
    {
      "question": "كانت طرابلس تتبع حكم أي دولة قبل الفتح الإسلامي؟",
      "options": ["الدولة الرومانية", "الدولة البيزنطية", "الدولة الأموية", "الدولة العباسية"],
      "answer": "الدولة البيزنطية"
    },
    {
      "question": "من أول من أرسل حملة استطلاعية إلى برقة؟",
      "options": ["عمرو بن العاص", "عقبة بن نافع", "عبد الله بن الزبير", "عبد الرحمن الداخل"],
      "answer": "عمرو بن العاص"
    },
    {
      "question": "لماذا اتجه عمرو بن العاص إلى فتح طرابلس بعد برقة؟",
      "options": ["لرغبته في التوسع", "لتأمين حدود مصر الغربية", "للبحث عن الثروات", "بناءً على أوامر الخليفة"],
      "answer": "لتأمين حدود مصر الغربية"
    },
    {
      "question": "ما اسم المدينة التي استعصت على عمرو أثناء حصاره لطرابلس؟",
      "options": ["صبراتة", "زويلة", "سرت", "لبدة"],
      "answer": "صبراتة"
    },
    {
      "question": "متى تم فتح الأندلس؟",
      "options": ["سنة 92 هـ", "سنة 95 هـ", "سنة 89 هـ", "سنة 98 هـ"],
      "answer": "سنة 92 هـ"
    },
    {
      "question": "من هو القائد الذي عبر مضيق جبل طارق لفتح الأندلس؟",
      "options": ["موسى بن نصير", "طارق بن زياد", "عبد الرحمن الداخل", "يوليان"],
      "answer": "طارق بن زياد"
    },
    {
      "question": "ما اسم معركة فتح الأندلس الحاسمة؟",
      "options": ["معركة وادي لكة", "معركة بلاط الشهداء", "معركة الزلاقة", "معركة العقاب"],
      "answer": "معركة وادي لكة"
    },
    {
      "question": "من هو آخر ملوك القوط في الأندلس؟",
      "options": ["رودريك", "أخيلا", "غيطشة", "ويتيزا"],
      "answer": "رودريك"
    },
    {
      "question": "ما هي عاصمة الأندلس في عهد الأمويين؟",
      "options": ["قرطبة", "إشبيلية", "طليطلة", "غرناطة"],
      "answer": "قرطبة"
    },
    {
      "question": "من هو مؤسس مدينة القيروان؟",
      "options": ["عقبة بن نافع", "حسان بن النعمان", "موسى بن نصير", "عمرو بن العاص"],
      "answer": "عقبة بن نافع"
    },
    {
      "question": "في أي سنة تم تأسيس مدينة القيروان؟",
      "options": ["50 هـ", "55 هـ", "60 هـ", "65 هـ"],
      "answer": "50 هـ"
    },
    {
      "question": "ما هو دور حسان بن النعمان في فتح المغرب؟",
      "options": ["القضاء على الكاهنة", "تأسيس القيروان", "فتح الأندلس", "بناء مدينة فاس"],
      "answer": "القضاء على الكاهنة"
    },
    {
      "question": "من هو القائد الذي أكمل فتح المغرب الأقصى؟",
      "options": ["موسى بن نصير", "طارق بن زياد", "عقبة بن نافع", "حسان بن النعمان"],
      "answer": "موسى بن نصير"
    },
    {
      "question": "ما هي أول عاصمة للأدارسة في المغرب؟",
      "options": ["فاس", "وليلي", "مكناس", "طنجة"],
      "answer": "وليلي"
    },
    {
      "question": "من هو مؤسس الدولة الإدريسية في المغرب؟",
      "options": ["إدريس الأول", "إدريس الثاني", "المعتصم", "يوسف بن تاشفين"],
      "answer": "إدريس الأول"
    },
    {
      "question": "ما هي المدينة التي اتخذها الأدارسة عاصمة لهم بعد وليلي؟",
      "options": ["فاس", "مراكش", "مكناس", "الرباط"],
      "answer": "فاس"
    },
    {
      "question": "من هو مؤسس دولة المرابطين؟",
      "options": ["يوسف بن تاشفين", "عبد المؤمن بن علي", "يعقوب المنصور", "عبد الله بن ياسين"],
      "answer": "عبد الله بن ياسين"
    },
    {
      "question": "في أي معركة انتصر المرابطون على ملوك الطوائف؟",
      "options": ["الزلاقة", "العقاب", "وادي المخازن", "تلمسان"],
      "answer": "الزلاقة"
    },
    {
      "question": "من هو مؤسس دولة الموحدين؟",
      "options": ["محمد بن تومرت", "عبد المؤمن بن علي", "يعقوب المنصور", "أبو يوسف يعقوب"],
      "answer": "محمد بن تومرت"
    },
    {
      "question": "من هو مؤسس مكتبة قرطبة الكبرى؟",
      "options": ["الحكم المستنصر", "عبد الرحمن الناصر", "هشام المؤيد", "المعتمد بن عباد"],
      "answer": "الحكم المستنصر"
    },
    {
      "question": "ما هو أشهر كتب ابن رشد الفلسفية؟",
      "options": ["تهافت التهافت", "الحاوي", "المقتبس", "العقد الفريد"],
      "answer": "تهافت التهافت"
    },
    {
      "question": "من هو مؤلف كتاب 'الذخيرة في محاسن أهل الجزيرة'؟",
      "options": ["ابن بسام الشنتريني", "ابن حيان", "ابن الأبار", "المقري"],
      "answer": "ابن بسام الشنتريني"
    },
    {
      "question": "ما هو أشهر مؤلفات ابن طفيل؟",
      "options": ["حي بن يقظان", "طوق الحمامة", "المقتبس", "نفح الطيب"],
      "answer": "حي بن يقظان"
    },
    {
      "question": "من هو مؤلف كتاب 'المعجب في تلخيص أخبار المغرب'؟",
      "options": ["عبد الواحد المراكشي", "ابن عذاري", "ابن أبي زرع", "البكري"],
      "answer": "عبد الواحد المراكشي"
    },
    {
      "question": "ما هي أشهر مؤلفات لسان الدين بن الخطيب؟",
      "options": ["الإحاطة في أخبار غرناطة", "نفح الطيب", "البيان المغرب", "المقتبس"],
      "answer": "الإحاطة في أخبار غرناطة"
    },
    {
      "question": "من هو مؤسس علم الجراحة في الأندلس؟",
      "options": ["الزهراوي", "ابن زهر", "ابن البيطار", "ابن رشد"],
      "answer": "الزهراوي"
    },
    {
      "question": "ما هو الكتاب الطبي الشهير للزهراوي؟",
      "options": ["التصريف لمن عجز عن التأليف", "القانون في الطب", "الكليات في الطب", "المنصوري"],
      "answer": "التصريف لمن عجز عن التأليف"
    },
    {
      "question": "من هو صاحب كتاب 'التيسير في المداواة والتدبير'؟",
      "options": ["ابن زهر", "الزهراوي", "ابن البيطار", "ابن رشد"],
      "answer": "ابن زهر"
    },
    {
      "question": "ما هو أشهر كتب ابن البيطار في علم النبات؟",
      "options": ["الجامع لمفردات الأدوية والأغذية", "المغني", "عمدة الطبيب", "تقويم الأدوية"],
      "answer": "الجامع لمفردات الأدوية والأغذية"
    },
    {
      "question": "من هو مخترع الإسطرلاب المسطح؟",
      "options": ["الزرقالي", "ابن الشاطر", "البتاني", "ابن الهيثم"],
      "answer": "الزرقالي"
    },
    {
      "question": "ما هو أشهر مؤلفات ابن حزم في الفقه؟",
      "options": ["المحلى", "الإحكام", "الفصل", "طوق الحمامة"],
      "answer": "المحلى"
    },
    {
      "question": "من هو مؤلف كتاب 'الفصل في الملل والأهواء والنحل'؟",
      "options": ["ابن حزم", "ابن رشد", "الغزالي", "ابن تومرت"],
      "answer": "ابن حزم"
    },
    {
      "question": "ما هو أشهر كتب ابن عبد ربه الأندلسي؟",
      "options": ["العقد الفريد", "الذخيرة", "المقتبس", "نفح الطيب"],
      "answer": "العقد الفريد"
    },
    {
      "question": "من هو مؤسس دولة بني مرين في المغرب؟",
      "options": ["عبد الحق المريني", "يعقوب المريني", "أبو يوسف المريني", "أبو عنان المريني"],
      "answer": "عبد الحق المريني"
    },
    {
      "question": "متى تأسست دولة بني مرين؟",
      "options": ["سنة 614 هـ", "سنة 620 هـ", "سنة 630 هـ", "سنة 640 هـ"],
      "answer": "سنة 614 هـ"
    },
    {
      "question": "ما هي عاصمة دولة بني مرين؟",
      "options": ["فاس", "مراكش", "مكناس", "الرباط"],
      "answer": "فاس"
    },
    {
      "question": "من هو السلطان المريني الذي بنى المدارس في فاس؟",
      "options": ["أبو الحسن المريني", "أبو عنان المريني", "أبو سعيد المريني", "يعقوب المريني"],
      "answer": "أبو الحسن المريني"
    },
    {
      "question": "ما هي أشهر المدارس المرينية في فاس؟",
      "options": ["المدرسة البوعنانية", "المدرسة الصفارين", "المدرسة العطارين", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤسس جامعة القرويين؟",
      "options": ["فاطمة الفهرية", "مريم الفهرية", "زينب النفزاوية", "عائشة البغدادية"],
      "answer": "فاطمة الفهرية"
    },
    {
      "question": "في أي عام تأسست جامعة القرويين؟",
      "options": ["245 هـ", "255 هـ", "265 هـ", "275 هـ"],
      "answer": "245 هـ"
    },
    {
      "question": "من هو مؤسس مدينة مراكش؟",
      "options": ["يوسف بن تاشفين", "علي بن يوسف", "المعتمد بن عباد", "عبد المؤمن الموحدي"],
      "answer": "يوسف بن تاشفين"
    },
    {
      "question": "ما هو أشهر المساجد التي بناها الموحدون في مراكش؟",
      "options": ["مسجد الكتبية", "جامع القرويين", "مسجد الأندلسيين", "جامع الفنا"],
      "answer": "مسجد الكتبية"
    },
    {
      "question": "من هو باني مسجد الكتبية في مراكش؟",
      "options": ["عبد المؤمن الموحدي", "يعقوب المنصور", "يوسف بن تاشفين", "علي بن يوسف"],
      "answer": "عبد المؤمن الموحدي"
    },
    {
      "question": "ما هي أشهر المعارك بين المرابطين والموحدين؟",
      "options": ["معركة البحيرة", "معركة تلمسان", "معركة وهران", "معركة تازة"],
      "answer": "معركة البحيرة"
    },
    {
      "question": "من هو القائد الموحدي الذي فتح تونس؟",
      "options": ["عبد المؤمن بن علي", "أبو يعقوب يوسف", "يعقوب المنصور", "الناصر الموحدي"],
      "answer": "عبد المؤمن بن علي"
    },
    {
      "question": "ما هي أشهر المكتبات في عهد الموحدين؟",
      "options": ["خزانة الموحدين", "خزانة القرويين", "خزانة مراكش", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤلف كتاب 'المن بالإمامة'؟",
      "options": ["ابن صاحب الصلاة", "ابن القطان", "البيذق", "ابن عذاري"],
      "answer": "ابن صاحب الصلاة"
    },
    {
      "question": "ما هو أشهر كتب التاريخ في عهد الموحدين؟",
      "options": ["البيان المغرب", "نظم الجمان", "المعجب", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤسس دولة بني وطاس في المغرب؟",
      "options": ["محمد الشيخ الوطاسي", "أبو زكريا الوطاسي", "علي بن يوسف", "أحمد الوطاسي"],
      "answer": "محمد الشيخ الوطاسي"
    },
    {
      "question": "ما هو أشهر المصانع في الأندلس؟",
      "options": ["مصانع الحرير", "مصانع الزجاج", "مصانع الورق", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "ما هي أشهر المحاصيل الزراعية التي أدخلها المسلمون إلى الأندلس؟",
      "options": ["قصب السكر", "القطن", "الأرز", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "ما هو النظام المائي الذي طوره المسلمون في الأندلس؟",
      "options": ["نظام النواعير", "نظام القنوات", "نظام السواقي", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "ما هي أشهر الصناعات في مدينة المرية الأندلسية؟",
      "options": ["صناعة الحرير", "صناعة السفن", "صناعة الزجاج", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "ما هو أشهر مراكز صناعة الورق في الأندلس؟",
      "options": ["شاطبة", "بلنسية", "طليطلة", "إشبيلية"],
      "answer": "شاطبة"
    },
    {
      "question": "من هو مؤلف كتاب 'طبقات الأطباء والحكماء'؟",
      "options": ["ابن جلجل", "ابن البيطار", "الزهراوي", "ابن رشد"],
      "answer": "ابن جلجل"
    },
    {
      "question": "ما هو أشهر كتب الزراعة في الأندلس؟",
      "options": ["كتاب الفلاحة لابن العوام", "المقنع", "كتاب النبات", "كتاب الأدوية"],
      "answer": "كتاب الفلاحة لابن العوام"
    },
    {
      "question": "من هو صاحب كتاب 'التكملة لكتاب الصلة'؟",
      "options": ["ابن الأبار", "ابن بشكوال", "ابن الفرضي", "الحميدي"],
      "answer": "ابن الأبار"
    },
    {
      "question": "ما هو أشهر كتب الجغرافيا في الأندلس؟",
      "options": ["نزهة المشتاق", "المسالك والممالك", "صفة جزيرة الأندلس", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤلف كتاب 'الصلة في تاريخ أئمة الأندلس'؟",
      "options": ["ابن بشكوال", "ابن الفرضي", "ابن الأبار", "الحميدي"],
      "answer": "ابن بشكوال"
    },
    {
      "question": "ما هي أشهر المدن العلمية في المغرب الإسلامي؟",
      "options": ["فاس", "القيروان", "تلمسان", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤسس علم الاجتماع؟",
      "options": ["ابن خلدون", "ابن حزم", "ابن رشد", "ابن طفيل"],
      "answer": "ابن خلدون"
    },
    {
      "question": "ما هو أشهر كتب ابن خلدون؟",
      "options": ["المقدمة", "العبر", "التعريف", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو صاحب كتاب 'روضة التعريف بالحب الشريف'؟",
      "options": ["لسان الدين بن الخطيب", "ابن زمرك", "ابن الجياب", "ابن خاتمة"],
      "answer": "لسان الدين بن الخطيب"
    },
    {
      "question": "ما هي أشهر المدارس في فاس؟",
      "options": ["المدرسة المصباحية", "المدرسة الصفارين", "المدرسة العطارين", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤسس مدينة فاس الجديد؟",
      "options": ["المريني أبو يوسف يعقوب", "إدريس الأول", "إدريس الثاني", "يوسف بن تاشفين"],
      "answer": "المريني أبو يوسف يعقوب"
    },
    {
      "question": "ما هو أشهر باب في فاس القديمة؟",
      "options": ["باب بوجلود", "باب الفتوح", "باب الجديد", "باب السعادة"],
      "answer": "باب بوجلود"
    },
    {
      "question": "متى تأسست مدينة فاس؟",
      "options": ["سنة 172 هـ", "سنة 182 هـ", "سنة 192 هـ", "سنة 202 هـ"],
      "answer": "سنة 172 هـ"
    },
    {
      "question": "من هو مؤسس مدينة مكناس؟",
      "options": ["المولى إسماعيل", "المولى الرشيد", "المولى سليمان", "المولى عبد الله"],
      "answer": "المولى إسماعيل"
    },
    {
      "question": "ما هي أشهر أبواب مراكش؟",
      "options": ["باب أغمات", "باب دكالة", "باب الخميس", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو أول والٍ على المغرب الإسلامي؟",
      "options": ["عقبة بن نافع", "موسى بن نصير", "حسان بن النعمان", "زهير بن قيس"],
      "answer": "عقبة بن نافع"
    },
    {
      "question": "من هو الوالي الذي أتم فتح المغرب الأقصى؟",
      "options": ["موسى بن نصير", "طارق بن زياد", "حسان بن النعمان", "عقبة بن نافع"],
      "answer": "موسى بن نصير"
    },
    {
      "question": "من هو مؤسس الدولة العلوية في المغرب؟",
      "options": ["المولى الرشيد", "المولى إسماعيل", "المولى علي الشريف", "المولى محمد"],
      "answer": "المولى علي الشريف"
    },
    {
      "question": "كم استمر حكم المولى إسماعيل في المغرب؟",
      "options": ["55 سنة", "45 سنة", "35 سنة", "25 سنة"],
      "answer": "55 سنة"
    },
    {
      "question": "من هو مؤسس مدينة الرباط؟",
      "options": ["يعقوب المنصور", "عبد المؤمن الموحدي", "يوسف بن تاشفين", "المولى إسماعيل"],
      "answer": "يعقوب المنصور"
    },
    {
      "question": "من هو آخر سلاطين الموحدين في المغرب؟",
      "options": ["إدريس الواثق", "أبو دبوس", "المرتضى", "المستنصر"],
      "answer": "أبو دبوس"
    },
    {
      "question": "من هو السلطان المريني الذي بنى المدرسة البوعنانية؟",
      "options": ["أبو عنان المريني", "أبو الحسن المريني", "أبو سعيد المريني", "أبو فارس المريني"],
      "answer": "أبو عنان المريني"
    },
    {
      "question": "متى انتهى حكم المرابطين في المغرب؟",
      "options": ["541 هـ", "551 هـ", "561 هـ", "571 هـ"],
      "answer": "541 هـ"
    },
    {
      "question": "من هو السلطان السعدي الذي هزم البرتغاليين في معركة وادي المخازن؟",
      "options": ["عبد الملك السعدي", "أحمد المنصور الذهبي", "محمد الشيخ", "عبد الله الغالب"],
      "answer": "عبد الملك السعدي"
    },
    {
      "question": "من هو مؤسس الدولة السعدية في المغرب؟",
      "options": ["محمد القائم", "محمد الشيخ", "أحمد الأعرج", "عبد الله الغالب"],
      "answer": "محمد القائم"
    },
    {
      "question": "من هو السلطان الذي لقب بالذهبي في الدولة السعدية؟",
      "options": ["أحمد المنصور", "عبد الملك", "محمد الشيخ", "عبد الله الغالب"],
      "answer": "أحمد المنصور"
    },
    {
      "question": "من هو آخر حكام الدولة السعدية؟",
      "options": ["أحمد العباس", "زيدان الناصر", "عبد الملك المعتصم", "محمد الشيخ الأصغر"],
      "answer": "أحمد العباس"
    },
    {
      "question": "من هو الوالي الأموي الذي حكم المغرب في عهد عبد الملك بن مروان؟",
      "options": ["حسان بن النعمان", "موسى بن نصير", "عقبة بن نافع", "زهير بن قيس"],
      "answer": "حسان بن النعمان"
    },
    {
      "question": "من هو مؤسس مدينة وجدة؟",
      "options": ["زيري بن عطية", "المعز لدين الله", "يوسف بن تاشفين", "إدريس الأول"],
      "answer": "زيري بن عطية"
    },
    {
      "question": "متى تأسست مدينة تطوان؟",
      "options": ["875 هـ", "885 هـ", "895 هـ", "905 هـ"],
      "answer": "875 هـ"
    },
    {
      "question": "من هو مؤسس مدينة تازة؟",
      "options": ["المولى إدريس الأول", "المولى إدريس الثاني", "يوسف بن تاشفين", "عبد المؤمن الموحدي"],
      "answer": "المولى إدريس الأول"
    },
    {
      "question": "من هو السلطان المريني الذي بنى المدرسة العطارين؟",
      "options": ["أبو الحسن المريني", "أبو عنان المريني", "أبو سعيد المريني", "أبو يوسف يعقوب"],
      "answer": "أبو الحسن المريني"
    },
    {
      "question": "متى تأسست دولة الأدارسة في المغرب؟",
      "options": ["172 هـ", "182 هـ", "192 هـ", "202 هـ"],
      "answer": "172 هـ"
    },
    {
      "question": "من هو آخر حكام الأدارسة في المغرب؟",
      "options": ["الحسن بن القاسم", "يحيى الرابع", "إدريس الثاني", "إدريس المأمون"],
      "answer": "الحسن بن القاسم"
    },
    {
      "question": "من هو مؤسس مدينة سلا؟",
      "options": ["عبد المؤمن الموحدي", "يعقوب المنصور", "يوسف بن تاشفين", "المولى إسماعيل"],
      "answer": "عبد المؤمن الموحدي"
    },
    {
      "question": "من هو أول أمير أموي في الأندلس؟",
      "options": ["عبد الرحمن الداخل", "هشام بن عبد الرحمن", "الحكم بن هشام", "عبد الرحمن الأوسط"],
      "answer": "عبد الرحمن الداخل"
    },
    {
      "question": "متى أعلن عبد الرحمن الناصر الخلافة في الأندلس؟",
      "options": ["316 هـ", "326 هـ", "336 هـ", "346 هـ"],
      "answer": "316 هـ"
    },
    {
      "question": "من هو الخليفة الذي بنى مدينة الزهراء؟",
      "options": ["عبد الرحمن الناصر", "الحكم المستنصر", "هشام المؤيد", "المعتمد بن عباد"],
      "answer": "عبد الرحمن الناصر"
    },
    {
      "question": "متى سقطت الخلافة الأموية في الأندلس؟",
      "options": ["422 هـ", "432 هـ", "442 هـ", "452 هـ"],
      "answer": "422 هـ"
    },
    {
      "question": "من هو آخر خلفاء بني أمية في الأندلس؟",
      "options": ["هشام الثالث", "عبد الرحمن الخامس", "محمد المستكفي", "سليمان المستعين"],
      "answer": "هشام الثالث"
    },
    {
      "question": "من هو مؤسس دولة بني عباد في إشبيلية؟",
      "options": ["القاضي محمد بن عباد", "المعتضد", "المعتمد", "الراضي"],
      "answer": "القاضي محمد بن عباد"
    },
    {
      "question": "من هو آخر ملوك بني الأحمر في غرناطة؟",
      "options": ["أبو عبد الله محمد", "أبو الحسن علي", "محمد الزغل", "يوسف الأول"],
      "answer": "أبو عبد الله محمد"
    },
    {
      "question": "متى سقطت غرناطة في يد الإسبان؟",
      "options": ["897 هـ", "887 هـ", "877 هـ", "867 هـ"],
      "answer": "897 هـ"
    },
    {
      "question": "من هو مؤسس دولة بني هود في سرقسطة؟",
      "options": ["المنذر بن يحيى", "سليمان المستعين", "المقتدر", "المؤتمن"],
      "answer": "المنذر بن يحيى"
    },
    {
      "question": "من هو صاحب كتاب 'المقتبس في تاريخ رجال الأندلس'؟",
      "options": ["ابن حيان", "ابن بشكوال", "ابن الأبار", "ابن سعيد"],
      "answer": "ابن حيان"
    },
    {
      "question": "من هو مؤسس دولة بني الأحمر في غرناطة؟",
      "options": ["محمد بن يوسف بن نصر", "محمد الفقيه", "يوسف الأول", "محمد الغني بالله"],
      "answer": "محمد بن يوسف بن نصر"
    },
    {
      "question": "ما هو أشهر قصور الحمراء في غرناطة؟",
      "options": ["قصر قمارش", "قصر الأسود", "قصر الريحان", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو الشاعر الأندلسي الملقب بذي الوزارتين؟",
      "options": ["لسان الدين بن الخطيب", "ابن زيدون", "ابن خفاجة", "ابن زمرك"],
      "answer": "لسان الدين بن الخطيب"
    },
    {
      "question": "ما هي أشهر معارك الأندلس؟",
      "options": ["معركة الزلاقة", "معركة العقاب", "معركة وادي لكة", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤلف كتاب 'نفح الطيب من غصن الأندلس الرطيب'؟",
      "options": ["المقري", "ابن الخطيب", "ابن سعيد", "ابن حزم"],
      "answer": "المقري"
    },
    {
      "question": "ما هي أشهر المكتبات في الأندلس؟",
      "options": ["مكتبة الحكم المستنصر", "مكتبة قرطبة", "مكتبة الزهراء", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤسس علم الجبر في الأندلس؟",
      "options": ["ابن الياسمين", "المجريطي", "ابن البناء", "الزرقالي"],
      "answer": "المجريطي"
    },
    {
      "question": "ما هي أشهر المدن العلمية في الأندلس؟",
      "options": ["قرطبة", "إشبيلية", "طليطلة", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو صاحب كتاب 'طوق الحمامة'؟",
      "options": ["ابن حزم", "ابن زيدون", "ابن خفاجة", "ابن عبد ربه"],
      "answer": "ابن حزم"
    },
    {
      "question": "ما هي أشهر الصناعات في الأندلس؟",
      "options": ["صناعة الورق", "صناعة الحرير", "صناعة السيوف", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤسس علم الأدوية في الأندلس؟",
      "options": ["ابن البيطار", "الزهراوي", "ابن زهر", "ابن رشد"],
      "answer": "ابن البيطار"
    },
    {
      "question": "ما هو أشهر مؤلفات الزهراوي في الطب؟",
      "options": ["التصريف لمن عجز عن التأليف", "الكليات في الطب", "القانون", "المنصوري"],
      "answer": "التصريف لمن عجز عن التأليف"
    },
    {
      "question": "من هو صاحب كتاب 'الحاوي في الطب'؟",
      "options": ["ابن زهر", "الزهراوي", "ابن رشد", "ابن البيطار"],
      "answer": "ابن زهر"
    },
    {
      "question": "ما هي أشهر المدن التجارية في الأندلس؟",
      "options": ["إشبيلية", "المرية", "مالقة", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤسس علم الفلك في الأندلس؟",
      "options": ["الزرقالي", "المجريطي", "ابن الصفار", "ابن البناء"],
      "answer": "الزرقالي"
    },
    {
      "question": "ما هو أشهر اختراعات الزرقالي؟",
      "options": ["الإسطرلاب المسطح", "الصفيحة الزرقالية", "ساعة المياه", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤلف كتاب 'التكملة في تاريخ علماء الأندلس'؟",
      "options": ["ابن الأبار", "ابن بشكوال", "ابن الفرضي", "ابن حيان"],
      "answer": "ابن الأبار"
    },
    {
        "question": "من هو مؤلف كتاب 'التكملة في تاريخ علماء الأندلس'؟",
        "options": ["ابن الأبار", "ابن بشكوال", "ابن الفرضي", "ابن حيان"],
        "answer": "ابن الأبار"
      },
    {
      "question": "ما هي أشهر المساجد في قرطبة؟",
      "options": ["المسجد الجامع", "مسجد الزهراء", "مسجد المنصور", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤسس مدينة المرية؟",
      "options": ["عبد الرحمن الناصر", "الحكم المستنصر", "المنصور بن أبي عامر", "المعتصم"],
      "answer": "عبد الرحمن الناصر"
    },
    {
      "question": "ما هي أشهر البوابات في قصر الحمراء؟",
      "options": ["باب العدل", "باب الشريعة", "باب السبع", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤسس مدينة تطوان الحديثة؟",
      "options": ["أبو الحسن المنظري", "المنصور السعدي", "موسى بن نصير", "علي المنظري"],
      "answer": "أبو الحسن المنظري"
    },
    {
      "question": "ما هي المدينة التي أسسها المرابطون كعاصمة لهم؟",
      "options": ["مراكش", "فاس", "مكناس", "الرباط"],
      "answer": "مراكش"
    },
    {
      "question": "من هو العالم الأندلسي الذي ألف كتاب 'طبقات الأمم'؟",
      "options": ["صاعد الأندلسي", "ابن حزم", "ابن رشد", "ابن طفيل"],
      "answer": "صاعد الأندلسي"
    },
    {
      "question": "ما هو أشهر مؤلفات ابن باجة الفلسفية؟",
      "options": ["تدبير المتوحد", "حي بن يقظان", "الكليات", "تهافت التهافت"],
      "answer": "تدبير المتوحد"
    },
    {
      "question": "من هو مؤلف كتاب 'الذيل والتكملة'؟",
      "options": ["ابن عبد الملك المراكشي", "ابن الأبار", "ابن بشكوال", "ابن الفرضي"],
      "answer": "ابن عبد الملك المراكشي"
    },
    {
      "question": "ما هي أشهر مؤلفات ابن سعيد المغربي؟",
      "options": ["المغرب في حلى المغرب", "نفح الطيب", "الإحاطة", "المقتبس"],
      "answer": "المغرب في حلى المغرب"
    },
    {
      "question": "من هو مؤسس علم الصيدلة في الأندلس؟",
      "options": ["ابن وافد", "ابن البيطار", "الزهراوي", "ابن زهر"],
      "answer": "ابن وافد"
    },
    {
      "question": "ما هو أشهر كتب ابن خاتمة في الطب؟",
      "options": ["تحصيل غرض القاصد", "التصريف", "الكليات", "القانون"],
      "answer": "تحصيل غرض القاصد"
    },
    {
      "question": "من هو مؤلف كتاب 'عمدة الطبيب'؟",
      "options": ["أبو الخير الإشبيلي", "ابن البيطار", "الغافقي", "ابن وافد"],
      "answer": "أبو الخير الإشبيلي"
    },
    {
      "question": "ما هو أشهر مؤلفات ابن فرناس؟",
      "options": ["رسالة في الطيران", "كتاب الأنواء", "رسالة الأسطرلاب", "كتاب الهيئة"],
      "answer": "رسالة في الطيران"
    },
    {
      "question": "من هو مخترع آلة المزولة في الأندلس؟",
      "options": ["الزرقالي", "ابن الصفار", "المجريطي", "ابن فرناس"],
      "answer": "الزرقالي"
    },
    {
      "question": "ما هو أشهر مؤلفات ابن عبدون؟",
      "options": ["رسالة في القضاء والحسبة", "الأحكام السلطانية", "السياسة الشرعية", "الخراج"],
      "answer": "رسالة في القضاء والحسبة"
    },
    {
      "question": "من هو مؤسس مدرسة الموسيقى الأندلسية؟",
      "options": ["زرياب", "ابن باجة", "ابن زيدون", "ابن خفاجة"],
      "answer": "زرياب"
    },
    {
      "question": "ما هي أشهر المدن العلمية في عهد المرابطين؟",
      "options": ["مراكش", "فاس", "سبتة", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤلف كتاب 'المقنع في الفلاحة'؟",
      "options": ["ابن حجاج الإشبيلي", "ابن العوام", "ابن بصال", "الطغنري"],
      "answer": "ابن حجاج الإشبيلي"
    },
    {
      "question": "ما هو أشهر مؤلفات ابن عبد ربه في الأدب؟",
      "options": ["العقد الفريد", "الذخيرة", "المقتبس", "نفح الطيب"],
      "answer": "العقد الفريد"
    },
    {
      "question": "من هو مؤسس علم الجغرافيا في الأندلس؟",
      "options": ["البكري", "الإدريسي", "ابن جبير", "ابن بطوطة"],
      "answer": "البكري"
    },
    {
      "question": "ما هو أشهر كتب الإدريسي في الجغرافيا؟",
      "options": ["نزهة المشتاق", "المسالك والممالك", "صورة الأرض", "تقويم البلدان"],
      "answer": "نزهة المشتاق"
    },
    {
      "question": "من هو مؤلف كتاب 'تاريخ قضاة الأندلس'؟",
      "options": ["النباهي", "ابن الفرضي", "ابن بشكوال", "ابن الأبار"],
      "answer": "النباهي"
    },
    {
      "question": "ما هي أشهر المدارس في غرناطة؟",
      "options": ["المدرسة النصرية", "المدرسة اليوسفية", "مدرسة الشريعة", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤسس صناعة الخزف في الأندلس؟",
      "options": ["عباس بن فرناس", "الزرقالي", "ابن الصفار", "المجريطي"],
      "answer": "عباس بن فرناس"
    },
    {
      "question": "ما هي أشهر صناعات مدينة المرية؟",
      "options": ["صناعة الحرير", "صناعة السفن", "صناعة الزجاج", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤلف كتاب 'برنامج شيوخ الأندلس'؟",
      "options": ["ابن جابر الوادي آشي", "ابن خير الإشبيلي", "ابن الفرضي", "ابن بشكوال"],
      "answer": "ابن جابر الوادي آشي"
    },
    {
      "question": "ما هو أشهر مؤلفات ابن سينا الذي انتشر في الأندلس؟",
      "options": ["القانون في الطب", "الشفاء", "النجاة", "الإشارات"],
      "answer": "القانون في الطب"
    },
    {
      "question": "من هو مؤسس علم النبات في الأندلس؟",
      "options": ["ابن البيطار", "الغافقي", "ابن وافد", "ابن الرومية"],
      "answer": "ابن الرومية"
    },
    {
      "question": "ما هي أشهر المكتبات في عهد الموحدين؟",
      "options": ["خزانة مراكش", "خزانة فاس", "خزانة سبتة", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤلف كتاب 'الممتع في صناعة الشعر'؟",
      "options": ["القرطاجني", "ابن عصفور", "ابن مالك", "السهيلي"],
      "answer": "القرطاجني"
    },
    {
      "question": "ما هو أشهر مؤلفات ابن مالك في النحو؟",
      "options": ["الألفية", "الكافية", "المفصل", "الجمل"],
      "answer": "الألفية"
    },
    {
      "question": "من هو مؤسس علم القراءات في الأندلس؟",
      "options": ["مكي بن أبي طالب", "الداني", "ابن الجزري", "الشاطبي"],
      "answer": "مكي بن أبي طالب"
    },
    {
      "question": "ما هو أشهر مؤلفات الشاطبي في القراءات؟",
      "options": ["حرز الأماني", "التيسير", "الكافي", "النشر"],
      "answer": "حرز الأماني"
    },
    {
      "question": "من هو مؤلف كتاب 'الموافقات في أصول الشريعة'؟",
      "options": ["الشاطبي", "ابن حزم", "ابن رشد", "القرافي"],
      "answer": "الشاطبي"
    },
    {
      "question": "ما هي أشهر المدن التجارية في المغرب الإسلامي؟",
      "options": ["فاس", "سجلماسة", "تلمسان", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤسس دولة الأغالبة في إفريقية؟",
      "options": ["إبراهيم بن الأغلب", "زيادة الله الأول", "أبو العباس", "محمد الأول"],
      "answer": "إبراهيم بن الأغلب"
    },
    {
      "question": "ما هي عاصمة الأغالبة؟",
      "options": ["القيروان", "تونس", "المهدية", "سوسة"],
      "answer": "القيروان"
    },
    {
      "question": "من هو مؤسس مدينة العباسية؟",
      "options": ["إبراهيم بن الأغلب", "زيادة الله الأول", "أبو العباس", "محمد الأول"],
      "answer": "إبراهيم بن الأغلب"
    },
    {
      "question": "ما هو أشهر إنجازات الأغالبة المعمارية؟",
      "options": ["فسقية الأغالبة", "جامع القيروان", "قصر الرقادة", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤسس مدينة المهدية؟",
      "options": ["عبيد الله المهدي", "المعز لدين الله", "المنصور", "العزيز بالله"],
      "answer": "عبيد الله المهدي"
    },
    {
      "question": "ما هي أشهر المدن العلمية في عهد الفاطميين؟",
      "options": ["المهدية", "القيروان", "سوسة", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤسس دولة بني زيري في إفريقية؟",
      "options": ["بلكين بن زيري", "المعز بن باديس", "تميم", "يحيى"],
      "answer": "بلكين بن زيري"
    },
    {
      "question": "ما هي عاصمة الزيريين؟",
      "options": ["القيروان", "المهدية", "تونس", "سوسة"],
      "answer": "القيروان"
    },
    {
      "question": "من هو مؤسس دولة الموحدين في المغرب؟",
      "options": ["محمد بن تومرت", "عبد المؤمن بن علي", "أبو يعقوب يوسف", "يعقوب المنصور"],
      "answer": "محمد بن تومرت"
    },
    {
      "question": "ما هي أشهر معارك الموحدين؟",
      "options": ["الأرك", "العقاب", "الزلاقة", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤسس دولة بني مرين؟",
      "options": ["عبد الحق المريني", "أبو يحيى", "أبو يوسف", "أبو الحسن"],
      "answer": "عبد الحق المريني"
    },
    {
      "question": "ما هي أشهر المدارس المرينية؟",
      "options": ["المدرسة البوعنانية", "المدرسة العطارين", "المدرسة الصفارين", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤسس دولة بني وطاس؟",
      "options": ["محمد الشيخ الوطاسي", "علي بن يوسف", "أحمد الوطاسي", "أبو زكريا"],
      "answer": "محمد الشيخ الوطاسي"
    },
    {
      "question": "ما هي عاصمة الوطاسيين؟",
      "options": ["فاس", "مراكش", "مكناس", "الرباط"],
      "answer": "فاس"
    },
    {
      "question": "من هو مؤسس الدولة السعدية؟",
      "options": ["محمد القائم", "أحمد الأعرج", "عبد الله الغالب", "محمد الشيخ"],
      "answer": "محمد القائم"
    },
    {
      "question": "ما هي أشهر معارك السعديين؟",
      "options": ["وادي المخازن", "تونين", "الركن", "جميع ما سبق"],
      "answer": "وادي المخازن"
    },
    {
      "question": "من هو مؤسس الدولة العلوية؟",
      "options": ["المولى الشريف", "المولى الرشيد", "المولى إسماعيل", "المولى عبد الله"],
      "answer": "المولى الشريف"
    },
    {
      "question": "ما هي أشهر إنجازات المولى إسماعيل؟",
      "options": ["بناء مكناس", "تنظيم الجيش", "توحيد المغرب", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤلف كتاب 'الاستقصا لأخبار دول المغرب الأقصى'؟",
      "options": ["الناصري", "ابن أبي زرع", "ابن عذاري", "المراكشي"],
      "answer": "الناصري"
    },
    {
      "question": "ما هو أشهر مؤلفات ابن عذاري؟",
      "options": ["البيان المغرب", "روض القرطاس", "المعجب", "الاستقصا"],
      "answer": "البيان المغرب"
    },
    {
      "question": "من هو مؤلف كتاب 'المسند الصحيح الحسن'؟",
      "options": ["ابن مرزوق", "القاضي عياض", "ابن العربي", "الزرقاني"],
      "answer": "ابن مرزوق"
    },
    {
      "question": "ما هو أشهر مؤلفات القاضي عياض؟",
      "options": ["الشفا", "المدارك", "ترتيب المدارك", "جميع ما سبق"],
      "answer": "الشفا"
    },
    {
      "question": "من هو مؤسس مدينة تازة؟",
      "options": ["المولى إدريس الأول", "المولى إدريس الثاني", "يوسف بن تاشفين", "عبد المؤمن"],
      "answer": "المولى إدريس الأول"
    },
    {
      "question": "ما هي أقدم مدينة في المغرب؟",
      "options": ["وليلي", "طنجة", "سبتة", "فاس"],
      "answer": "وليلي"
    },
    {
      "question": "من هو مؤسس مدينة أصيلة؟",
      "options": ["الأغالبة", "الأدارسة", "الفاطميون", "المرابطون"],
      "answer": "الأغالبة"
    },
    {
      "question": "ما هي أشهر المدن التجارية في عهد المرابطين؟",
      "options": ["أغمات", "سجلماسة", "مراكش", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤلف كتاب 'المغرب في ذكر بلاد إفريقية والمغرب'؟",
      "options": ["البكري", "الإدريسي", "ابن سعيد", "الحميري"],
      "answer": "البكري"
    },
    {
      "question": "ما هو أشهر مؤلفات الحميري في الجغرافيا؟",
      "options": ["الروض المعطار", "نزهة المشتاق", "المسالك والممالك", "صورة الأرض"],
      "answer": "الروض المعطار"
    },
    {
      "question": "من هو مؤسس مدينة تارودانت؟",
      "options": ["المرابطون", "الموحدون", "السعديون", "العلويون"],
      "answer": "المرابطون"
    },
    {
      "question": "ما هي أشهر المدن العلمية في عهد السعديين؟",
      "options": ["مراكش", "فاس", "تارودانت", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤلف كتاب 'جذوة المقتبس'؟",
      "options": ["الحميدي", "ابن بشكوال", "ابن الفرضي", "ابن الأبار"],
      "answer": "الحميدي"
    },
    {
      "question": "ما هو أشهر مؤلفات ابن عبد البر؟",
      "options": ["الاستيعاب", "الإصابة", "أسد الغابة", "الاستذكار"],
      "answer": "الاستيعاب"
    },
    {
      "question": "من هو مؤسس مدينة الجديدة؟",
      "options": ["السلطان سيدي محمد بن عبد الله", "المولى إسماعيل", "المولى سليمان", "المولى عبد الرحمن"],
      "answer": "السلطان سيدي محمد بن عبد الله"
    },
    {
      "question": "ما هي أشهر الموانئ المغربية في العصر الوسيط؟",
      "options": ["سلا", "العرائش", "أصيلة", "جميع ما سبق"],
      "answer": "جميع ما سبق"
    },
    {
      "question": "من هو مؤسس مدينة شفشاون؟",
      "options": ["علي بن راشد", "موسى بن نصير", "يوسف بن تاشفين", "إدريس الأول"],
      "answer": "علي بن راشد"
    },
    {
      "question": "ما هو أشهر مؤلفات ابن زهر الحفيد؟",
      "options": ["التيسير في المداواة والتدبير", "الكليات", "المنصوري", "القانون"],
      "answer": "التيسير في المداواة والتدبير"
    },
    {
      "question": "من هو مؤلف كتاب 'المعرب عن بعض عجائب المغرب'؟",
      "options": ["أبو حامد الغرناطي", "البكري", "الإدريسي", "ابن سعيد"],
      "answer": "أبو حامد الغرناطي"
    },
    {
      "question": "ما هو أشهر مؤلفات ابن عميرة المخزومي؟",
      "options": ["تاريخ ميورقة", "تاريخ الأندلس", "فتح الأندلس", "أخبار مجموعة"],
      "answer": "تاريخ ميورقة"
    },
    {
      "question": "من هو مؤسس مدينة تيط في المغرب؟",
      "options": ["المرابطون", "الموحدون", "الأدارسة", "المرينيون"],
      "answer": "المرابطون"
    },
    {
      "question": "ما هو أشهر مؤلفات ابن رشيق القيرواني؟",
      "options": ["العمدة في محاسن الشعر", "المقتبس", "الذخيرة", "نفح الطيب"],
      "answer": "العمدة في محاسن الشعر"
    },
    {
      "question": "من هو مؤلف كتاب 'المسالك والممالك'؟",
      "options": ["البكري", "الإدريسي", "ابن خرداذبة", "ابن حوقل"],
      "answer": "البكري"
    },
    {
      "question": "ما هي أول مدينة أسسها الأدارسة في المغرب؟",
      "options": ["وليلي", "فاس", "تازة", "سلا"],
      "answer": "وليلي"
    }
  ],
  "trueFalseQuestions": [
    {
      "question": "دخل المسلمون برقة دون مقاومة كبيرة.",
      "answer": true
    },
    {
      "question": "كان هدف الفتوحات الإسلامية في الأندلس هو فرض الإسلام بالقوة.",
      "answer": false
    },
    {
      "question": "قُتل القائد جرجير في معركة سبيطلة على يد عبد الله بن الزبير.",
      "answer": false
    },
    {
      "question": "القيروان بُنيت لتكون مركزًا عسكريًا وثقافيًا.",
      "answer": true
    },
    {
      "question": "الكاهنة كانت ملكة أمازيغية قادت مقاومة ضد المسلمين.",
      "answer": true
    },
    {
      "question": "استمر الحكم الإسلامي في الأندلس لمدة ثمانية قرون.",
      "answer": true
    },
    {
      "question": "كانت اللغة العربية هي اللغة الوحيدة المستخدمة في الأندلس.",
      "answer": false
    },
    {
      "question": "أسس عبد الرحمن الداخل الدولة الأموية في الأندلس.",
      "answer": true
    },
    {
      "question": "كان المجتمع الأندلسي يتكون فقط من المسلمين.",
      "answer": false
    },
    {
      "question": "ازدهرت العلوم والفنون في الأندلس خلال العصر الذهبي.",
      "answer": true
    },
    {
      "question": "تم بناء مدينة فاس على يد إدريس الثاني.",
      "answer": true
    },
    {
      "question": "كانت دولة المرابطين أول دولة موحدة في تاريخ المغرب الإسلامي.",
      "answer": true
    },
    {
      "question": "انتهى حكم الموحدين في الأندلس بعد معركة العقاب.",
      "answer": true
    },
    {
      "question": "كانت غرناطة آخر معاقل المسلمين في الأندلس.",
      "answer": true
    },
    {
      "question": "لم يكن هناك تعايش ديني في الأندلس بين المسلمين وأهل الكتاب.",
      "answer": false
    },
    {
      "question": "كان المجتمع الأندلسي مجتمعاً متعدد الثقافات والأديان.",
      "answer": true
    },
    {
      "question": "لم يكن للمرأة دور في الحياة العلمية والثقافية في الأندلس.",
      "answer": false
    },
    {
      "question": "تأثر الأدب الأوروبي بالشعر الأندلسي خاصة في فن الموشحات.",
      "answer": true
    },
    {
      "question": "كانت صناعة الورق من الصناعات المهمة في الأندلس.",
      "answer": true
    },
    {
      "question": "اقتصر التعليم في الأندلس على المساجد فقط.",
      "answer": false
    },
    {
      "question": "كان نظام الري في الأندلس متطوراً وأثر في الزراعة الأوروبية.",
      "answer": true
    },
    {
      "question": "لم يكن للأندلسيين اهتمام بعلم الفلك والرياضيات.",
      "answer": false
    },
    {
      "question": "تأثرت العمارة الأوروبية بالطراز المعماري الأندلسي.",
      "answer": true
    },
    {
      "question": "كانت التجارة في الأندلس مقتصرة على التجارة الداخلية فقط.",
      "answer": false
    },
    {
      "question": "استخدم الأندلسيون نظام الصكوك المالية في معاملاتهم التجارية.",
      "answer": true
    },
    {
      "question": "كان التعليم في الأندلس مقتصراً على الذكور فقط.",
      "answer": false
    },
    {
      "question": "تأثرت الموسيقى الأوروبية بالموسيقى الأندلسية.",
      "answer": true
    },
    {
      "question": "كانت المكتبات في الأندلس مفتوحة للجميع.",
      "answer": true
    },
    {
      "question": "لم يكن هناك اهتمام بالترجمة في الأندلس.",
      "answer": false
    },
    {
      "question": "كان المجتمع الأندلسي مجتمعاً متعدد الثقافات.",
      "answer": true
    },
    {
      "question": "كان للأندلس دور كبير في نقل العلوم إلى أوروبا.",
      "answer": true
    },
    {
      "question": "لم تكن هناك مدارس خاصة بتعليم الطب في الأندلس.",
      "answer": false
    },
    {
      "question": "كان علماء الأندلس يهتمون بالتجربة العلمية.",
      "answer": true
    },
    {
      "question": "لم يكن هناك اهتمام بالفلسفة في الأندلس.",
      "answer": false
    },
    {
      "question": "كانت المكتبات في الأندلس تحتوي على كتب من مختلف الثقافات.",
      "answer": true
    },
    {
      "question": "اقتصرت الترجمة في الأندلس على الكتب العربية فقط.",
      "answer": false
    },
    {
      "question": "كان هناك تبادل ثقافي بين الأندلس وبقية أوروبا.",
      "answer": true
    },
    {
      "question": "لم يكن للمرأة دور في الحياة الثقافية في المغرب الإسلامي.",
      "answer": false
    },
    {
      "question": "تأثرت العمارة المغربية بالعمارة الأندلسية.",
      "answer": true
    },
    {
      "question": "كانت صناعة السفن من الصناعات المهمة في المغرب الإسلامي.",
      "answer": true
    },
    {
      "question": "لم يكن هناك اهتمام بالزراعة في المغرب الإسلامي.",
      "answer": false
    },
    {
      "question": "كانت المدارس المرينية مفتوحة للطلاب من جميع الطبقات.",
      "answer": true
    },
    {
      "question": "اقتصر التعليم في جامعة القرويين على العلوم الدينية فقط.",
      "answer": false
    },
    {
      "question": "كان هناك تنوع في المذاهب الفقهية في المغرب الإسلامي.",
      "answer": true
    },
    {
      "question": "لم يكن هناك اهتمام بالفنون في المغرب الإسلامي.",
      "answer": false
    },
    {
      "question": "كان المغرب مركزاً مهماً للتجارة مع أفريقيا جنوب الصحراء.",
      "answer": true
    },
    {
      "question": "لم يكن هناك تواصل تجاري بين المغرب والأندلس.",
      "answer": false
    },
    {
      "question": "كانت مدينة فاس مركزاً علمياً مهماً في العالم الإسلامي.",
      "answer": true
    },
    {
      "question": "لم يكن للمغرب دور في نشر الإسلام في أفريقيا.",
      "answer": false
    },
    {
      "question": "كانت صناعة الجلود من الصناعات المهمة في المغرب.",
      "answer": true
    },
    {
      "question": "كانت قرطبة أكبر مدن أوروبا في القرن العاشر الميلادي.",
      "answer": true
    },
    {
      "question": "لم يكن هناك تسامح ديني في الأندلس.",
      "answer": false
    },
    {
      "question": "كان التعليم في الأندلس مجانياً للجميع.",
      "answer": true
    },
    {
      "question": "اقتصرت الترجمة في الأندلس على الكتب العربية.",
      "answer": false
    },
    {
      "question": "تأثرت العمارة الأوروبية بالعمارة الأندلسية.",
      "answer": true
    },
    {
      "question": "كانت الموسيقى الأندلسية مؤثرة في الموسيقى الأوروبية.",
      "answer": true
    },
    {
      "question": "لم يكن للمرأة دور في الحياة العلمية في الأندلس.",
      "answer": false
    },
    {
      "question": "تأثر الشعر الأوروبي بالموشحات الأندلسية.",
      "answer": true
    },
    {
      "question": "كانت الزراعة متطورة في الأندلس.",
      "answer": true
    },
    {
      "question": "لم يكن هناك تبادل ثقافي بين الأندلس وأوروبا.",
      "answer": false
    },
    {
      "question": "كان الأندلسيون روادًا في علم الفلك والرياضيات.",
      "answer": true
    },
    {
      "question": "لم يكن هناك اهتمام بالترجمة في الأندلس.",
      "answer": false
    },
    {
      "question": "كانت المكتبات في الأندلس مفتوحة للجميع.",
      "answer": true
    },
    {
      "question": "اقتصر التعليم في الأندلس على العلوم الدينية.",
      "answer": false
    },
    {
      "question": "كان للأندلس تأثير كبير في النهضة الأوروبية.",
      "answer": true
    }
  ]
};

// إضافة أسئلة جديدة إلى قاعدة البيانات
const additionalQuestions = {
  "mcqQuestions": [
    {
      "question": "ما هو دور يوليان في فتح الأندلس؟",
      "options": ["قدم السفن للمسلمين", "قاد جيش القوط", "حارب المسلمين", "لم يكن له دور"],
      "answer": "قدم السفن للمسلمين"
    },
    {
      "question": "من هو مؤسس مدينة أغمات في المغرب؟",
      "options": ["زيري بن عطية", "يوسف بن تاشفين", "المعز لدين الله", "إدريس الأول"],
      "answer": "زيري بن عطية"
    },
    {
      "question": "ما هي أول عاصمة للمرابطين في المغرب؟",
      "options": ["مراكش", "فاس", "أغمات", "سجلماسة"],
      "answer": "أغمات"
    },
    {
      "question": "من هو القائد الذي هزم ألفونسو السادس في معركة الزلاقة؟",
      "options": ["يوسف بن تاشفين", "علي بن يوسف", "المعتمد بن عباد", "المتوكل بن الأفطس"],
      "answer": "يوسف بن تاشفين"
    },
    {
      "question": "ما هو أشهر مؤلفات ابن طفيل الفلسفية؟",
      "options": ["حي بن يقظان", "الكليات", "تهافت التهافت", "فصل المقال"],
      "answer": "حي بن يقظان"
    },
    {
      "question": "من هو مؤسس علم الجراحة في الأندلس؟",
      "options": ["الزهراوي", "ابن زهر", "ابن رشد", "ابن البيطار"],
      "answer": "الزهراوي"
    },
    {
      "question": "ما هو أشهر كتب ابن خلدون؟",
      "options": ["المقدمة", "العبر", "التعريف", "الإحاطة"],
      "answer": "المقدمة"
    },
    {
      "question": "من هو مؤسس دولة الموحدين؟",
      "options": ["محمد بن تومرت", "عبد المؤمن بن علي", "يوسف بن تاشفين", "يعقوب المنصور"],
      "answer": "محمد بن تومرت"
    },
    {
      "question": "ما هي أشهر معركة بين المرابطين والموحدين؟",
      "options": ["معركة البحيرة", "معركة الزلاقة", "معركة العقاب", "معركة وادي المخازن"],
      "answer": "معركة البحيرة"
    },
    {
      "question": "من هو آخر سلاطين غرناطة؟",
      "options": ["أبو عبد الله محمد", "أبو الحسن علي", "محمد الزغل", "يوسف الأول"],
      "answer": "أبو عبد الله محمد"
    },
    {
      "question": "ما هو أشهر قصور الحمراء؟",
      "options": ["قصر قمارش", "قصر الأسود", "قصر الريحان", "قصر المشور"],
      "answer": "قصر قمارش"
    },
    {
      "question": "من هو مؤلف كتاب 'روض القرطاس'؟",
      "options": ["ابن أبي زرع", "ابن عذاري", "المراكشي", "ابن الخطيب"],
      "answer": "ابن أبي زرع"
    },
    {
      "question": "ما هي أشهر المدارس المرينية في فاس؟",
      "options": ["المدرسة البوعنانية", "المدرسة الصفارين", "المدرسة العطارين", "كل ما سبق"],
      "answer": "كل ما سبق"
    },
    {
      "question": "من هو مؤسس مدينة تطوان الحديثة؟",
      "options": ["أبو الحسن المنظري", "المنصور السعدي", "موسى بن نصير", "علي المنظري"],
      "answer": "أبو الحسن المنظري"
    },
    {
      "question": "ما هو أشهر أبواب فاس القديمة؟",
      "options": ["باب بوجلود", "باب الفتوح", "باب الخوخة", "باب الجديد"],
      "answer": "باب بوجلود"
    },
    {
      "question": "من هو مؤسس جامع القرويين؟",
      "options": ["فاطمة الفهرية", "مريم الفهرية", "زينب النفزاوية", "خديجة أم البنين"],
      "answer": "فاطمة الفهرية"
    },
    {
      "question": "ما هي أقدم جامعة في العالم؟",
      "options": ["جامعة القرويين", "الأزهر الشريف", "جامعة بولونيا", "جامعة باريس"],
      "answer": "جامعة القرويين"
    },
    {
      "question": "من هو مؤلف كتاب 'المعجب في تلخيص أخبار المغرب'؟",
      "options": ["عبد الواحد المراكشي", "ابن عذاري", "البكري", "ابن أبي زرع"],
      "answer": "عبد الواحد المراكشي"
    },
    {
      "question": "ما هو أشهر مؤلفات الزجالي الأندلسي؟",
      "options": ["الأزجال", "الموشحات", "القصائد", "المقامات"],
      "answer": "الأزجال"
    },
    {
      "question": "من هو مؤسس مدينة الرباط؟",
      "options": ["يعقوب المنصور", "عبد المؤمن", "يوسف بن تاشفين", "المولى إسماعيل"],
      "answer": "يعقوب المنصور"
    }
  ],
  "trueFalseQuestions": [
    {
      "question": "كانت مدينة طليطلة عاصمة القوط قبل الفتح الإسلامي.",
      "answer": true
    },
    {
      "question": "لم يكن للمرأة دور في الحياة العلمية في الأندلس.",
      "answer": false
    },
    {
      "question": "أسس المرابطون مدينة مراكش.",
      "answer": true
    },
    {
      "question": "كان ابن رشد قاضياً إلى جانب كونه فيلسوفاً.",
      "answer": true
    },
    {
      "question": "لم تتأثر العمارة الأوروبية بالعمارة الأندلسية.",
      "answer": false
    },
    {
      "question": "كانت صناعة الورق من الصناعات المهمة في الأندلس.",
      "answer": true
    },
    {
      "question": "اقتصر التعليم في جامعة القرويين على العلوم الدينية فقط.",
      "answer": false
    },
    {
      "question": "كان المجتمع الأندلسي مجتمعاً متعدد الثقافات.",
      "answer": true
    },
    {
      "question": "لم يكن هناك تبادل علمي بين الأندلس وأوروبا.",
      "answer": false
    },
    {
      "question": "أسهم علماء الأندلس في تطوير علم الفلك.",
      "answer": true
    },
    {
      "question": "كانت اللغة العربية هي اللغة الوحيدة المستخدمة في الأندلس.",
      "answer": false
    },
    {
      "question": "تأثر الشعر الأوروبي بالموشحات الأندلسية.",
      "answer": true
    },
    {
      "question": "لم يكن هناك اهتمام بالترجمة في الأندلس.",
      "answer": false
    },
    {
      "question": "كان نظام الري في الأندلس متطوراً جداً.",
      "answer": true
    },
    {
      "question": "اقتصرت التجارة في الأندلس على التجارة الداخلية.",
      "answer": false
    },
    {
      "question": "كان للأندلس دور كبير في نقل العلوم إلى أوروبا.",
      "answer": true
    },
    {
      "question": "لم تكن هناك مكتبات عامة في الأندلس.",
      "answer": false
    },
    {
      "question": "تأثرت الموسيقى الأوروبية بالموسيقى الأندلسية.",
      "answer": true
    },
    {
      "question": "كانت صناعة السفن من الصناعات المهمة في المغرب.",
      "answer": true
    },
    {
      "question": "لم يكن هناك تسامح ديني في الأندلس.",
      "answer": false
    }
  ]
};

// دمج الأسئلة الجديدة مع القائمة الحالية
questionsData.mcqQuestions = questionsData.mcqQuestions.concat(additionalQuestions.mcqQuestions);
questionsData.trueFalseQuestions = questionsData.trueFalseQuestions.concat(additionalQuestions.trueFalseQuestions);

// المتغيرات العامة
let questions = questionsData;
let currentQuestions = [];
let currentQuestionIndex = 0;
let score = 0;
let timer;
let timeLeft;
let userAnswers = [];

// ثوابت
const QUIZ_TIME = 45; // زيادة الوقت لكل سؤال
const CATEGORIES = {
    'history': 'تاريخ وأحداث',
    'culture': 'حضارة وثقافة',
    'science': 'علوم ومعارف',
    'society': 'مجتمع وحياة'
};

// تحسين تصميم الواجهة
const styles = `
  .container {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
    font-family: 'Noto Kufi Arabic', sans-serif;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    border-radius: 15px;
    box-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);
  }

  .setup-container {
    text-align: center;
    padding: 30px;
    background: white;
    border-radius: 15px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }

  .quiz-header {
    margin-bottom: 30px;
  }

  .quiz-header h1 {
    color: #2d3748;
    font-size: 2em;
    margin-bottom: 10px;
  }

  .quiz-header p {
    color: #4a5568;
    font-size: 1.1em;
  }

  .setup-options {
    display: flex;
    flex-direction: column;
    gap: 20px;
    max-width: 400px;
    margin: 0 auto;
  }

  .form-group {
    text-align: right;
  }

  .form-group label {
    display: block;
    margin-bottom: 8px;
    color: #4a5568;
    font-weight: bold;
  }

  .form-control {
    width: 100%;
    padding: 12px;
    border: 2px solid #e2e8f0;
    border-radius: 8px;
    font-size: 1em;
    color: #2d3748;
    background: #f8fafc;
    transition: all 0.3s ease;
  }

  .form-control:focus {
    border-color: #4a90e2;
    box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
    outline: none;
  }

  .button {
    width: 100%;
    padding: 12px 24px;
    border: none;
    border-radius: 8px;
    font-size: 1.1em;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
  }

  .button.disabled {
    opacity: 0.7;
    cursor: not-allowed;
  }

  .primary-button {
    background: #4a90e2;
    color: white;
  }

  .primary-button:hover:not(.disabled) {
    background: #357abd;
    transform: translateY(-2px);
  }

  .secondary-button {
    background: #718096;
    color: white;
  }

  .secondary-button:hover:not(.disabled) {
    background: #4a5568;
    transform: translateY(-2px);
  }

  .success-button {
    background: #48bb78;
    color: white;
  }

  .success-button:hover:not(.disabled) {
    background: #38a169;
    transform: translateY(-2px);
  }

  .setup-steps {
    display: flex;
    justify-content: center;
    margin-bottom: 30px;
  }

  .step {
    display: flex;
    align-items: center;
    margin: 0 15px;
  }

  .step-number {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background: #e2e8f0;
    color: #4a5568;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 10px;
    font-weight: bold;
  }

  .step.active .step-number {
    background: #4a90e2;
    color: white;
  }

  .step-text {
    color: #4a5568;
  }

  .step.active .step-text {
    color: #2d3748;
    font-weight: bold;
  }

  .quiz-options {
    display: none;
  }

  .quiz-options.active {
    display: block;
    animation: fadeIn 0.5s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
`;

// إضافة الأنماط إلى الصفحة
document.addEventListener('DOMContentLoaded', function() {
    const styleSheet = document.createElement('style');
    styleSheet.textContent = styles;
    document.head.appendChild(styleSheet);
    initializeSetup();
});

// تهيئة صفحة الإعداد
function initializeSetup() {
    const setupContainer = document.getElementById('setup-container');
    setupContainer.innerHTML = `
        <div class="quiz-header">
            <h1>اختبار تاريخ الأندلس والمغرب</h1>
            <p>اختبر معرفتك بتاريخ الحضارة الإسلامية في الأندلس والمغرب</p>
        </div>
        
        <div class="setup-steps">
            <div class="step active" id="step1">
                <div class="step-number">1</div>
                <div class="step-text">اختيار الإعدادات</div>
            </div>
            <div class="step" id="step2">
                <div class="step-number">2</div>
                <div class="step-text">تجهيز الاختبار</div>
            </div>
            <div class="step" id="step3">
                <div class="step-number">3</div>
                <div class="step-text">بدء الاختبار</div>
            </div>
        </div>

        <div class="setup-options">
            <div class="form-group">
                <label for="questionCount">عدد الأسئلة:</label>
                <select id="questionCount" class="form-control" onchange="validateSetup()">
                    <option value="">اختر عدد الأسئلة</option>
                    <option value="10">10 أسئلة</option>
                    <option value="20">20 سؤال</option>
                    <option value="30">30 سؤال</option>
                    <option value="40">40 سؤال</option>
                    <option value="50">50 سؤال</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="questionType">نوع الأسئلة:</label>
                <select id="questionType" class="form-control" onchange="validateSetup()">
                    <option value="">اختر نوع الأسئلة</option>
                    <option value="all">جميع الأنواع</option>
                    <option value="mcq">اختيار من متعدد</option>
                    <option value="tf">صح وخطأ</option>
                </select>
            </div>

            <button id="prepare-button" class="button primary-button disabled" onclick="prepareQuiz()" disabled>
                <i class="fas fa-cog"></i>
                تجهيز الاختبار
            </button>

            <button id="start-button" class="button success-button disabled" onclick="startQuiz()" disabled>
                <i class="fas fa-play"></i>
                بدء الاختبار
            </button>
        </div>
    `;
}

// التحقق من صحة الإعدادات
function validateSetup() {
    const questionCount = document.getElementById('questionCount').value;
    const questionType = document.getElementById('questionType').value;
    const prepareButton = document.getElementById('prepare-button');
    
    if (questionCount && questionType) {
        prepareButton.classList.remove('disabled');
        prepareButton.disabled = false;
    } else {
        prepareButton.classList.add('disabled');
        prepareButton.disabled = true;
    }
}

// تجهيز الاختبار
function prepareQuiz() {
    const questionCount = parseInt(document.getElementById('questionCount').value);
    const questionType = document.getElementById('questionType').value;
    
    // تحديث الخطوات
    document.getElementById('step1').classList.remove('active');
    document.getElementById('step2').classList.add('active');
    
    // تحديث الأزرار
    document.getElementById('prepare-button').style.display = 'none';
    const startButton = document.getElementById('start-button');
    startButton.classList.remove('disabled');
    startButton.disabled = false;
    
    // تجهيز الأسئلة
    currentQuestions = selectQuestions(questionCount, questionType);
    
    // عرض رسالة التجهيز
    const setupContainer = document.querySelector('.setup-options');
    setupContainer.innerHTML += `
        <div class="preparation-message" style="margin-top: 20px; text-align: center; color: #2d3748;">
            <i class="fas fa-check-circle" style="color: #48bb78; font-size: 2em;"></i>
            <p style="margin-top: 10px;">تم تجهيز ${questionCount} سؤال بنجاح!</p>
            <p>اضغط على زر "بدء الاختبار" للبدء</p>
        </div>
    `;
}

// بدء الاختبار
function startQuiz() {
    // تحديث الخطوات
    document.getElementById('step2').classList.remove('active');
    document.getElementById('step3').classList.add('active');
    
    // إخفاء صفحة الإعداد وإظهار صفحة الاختبار
    document.getElementById('setup-container').classList.add('hidden');
    document.getElementById('quiz-container').classList.remove('hidden');
    
    // تهيئة الاختبار
    currentQuestionIndex = 0;
    score = 0;
    userAnswers = new Array(currentQuestions.length).fill(null);
    
    // عرض السؤال الأول
    showQuestion();
    updateProgress();
    startTimer();
}

// تحسين عرض الأسئلة
function updateQuestionDisplay() {
    const question = currentQuestions[currentQuestionIndex];
    const container = document.querySelector('.question-container');
    
    container.innerHTML = `
        <div class="question-header">
            <div class="question-info">
                <span class="category-badge">
                    <i class="fas ${question.options ? 'fa-list-ul' : 'fa-check-circle'}"></i>
                    ${question.options ? 'اختيار من متعدد' : 'صح وخطأ'}
                </span>
                <span class="question-number">السؤال ${currentQuestionIndex + 1} من ${currentQuestions.length}</span>
            </div>
            <h2 class="question-text">${question.question}</h2>
        </div>
        <div class="timer-container">
            <i class="fas fa-clock timer-icon"></i>
            <span id="time-remaining"></span>
        </div>
        <div class="options-container"></div>
        <div class="feedback hidden"></div>
        <div class="navigation-buttons">
            ${currentQuestionIndex > 0 ? `
                <button class="button secondary-button" onclick="previousQuestion()">
                    <i class="fas fa-arrow-right"></i>
                    السؤال السابق
                </button>
            ` : ''}
            ${currentQuestionIndex < currentQuestions.length - 1 ? `
                <button class="button primary-button" onclick="nextQuestion()">
                    <i class="fas fa-arrow-left"></i>
                    السؤال التالي
                </button>
            ` : `
                <button class="button success-button" onclick="showResults()">
                    <i class="fas fa-flag-checkered"></i>
                    إنهاء الاختبار
                </button>
            `}
        </div>
    `;
    
    // إضافة الخيارات
    const optionsContainer = container.querySelector('.options-container');
    if (question.options) {
        question.options.forEach((option, index) => {
            const button = document.createElement('button');
            button.className = 'option';
            button.innerHTML = `
                <span class="option-number">${String.fromCharCode(65 + index)}</span>
                <span class="option-text">${option}</span>
            `;
            if (userAnswers[currentQuestionIndex]) {
                button.classList.add(
                    userAnswers[currentQuestionIndex].userAnswer === option ? 
                    (userAnswers[currentQuestionIndex].isCorrect ? 'correct' : 'incorrect') : ''
                );
                button.disabled = true;
            } else {
                button.onclick = () => checkAnswer(option);
            }
            optionsContainer.appendChild(button);
        });
    } else {
        ['صح', 'خطأ'].forEach((option, index) => {
            const button = document.createElement('button');
            button.className = 'option';
            button.innerHTML = `
                <span class="option-number">${index + 1}</span>
                <span class="option-text">${option}</span>
            `;
            if (userAnswers[currentQuestionIndex]) {
                button.classList.add(
                    userAnswers[currentQuestionIndex].userAnswer === (option === 'صح') ? 
                    (userAnswers[currentQuestionIndex].isCorrect ? 'correct' : 'incorrect') : ''
                );
                button.disabled = true;
            } else {
                button.onclick = () => checkAnswer(option === 'صح');
            }
            optionsContainer.appendChild(button);
        });
    }
    
    // تحديث شريط التقدم
    updateProgress();
}

// إضافة وظيفة السؤال السابق
function previousQuestion() {
    if (currentQuestionIndex > 0) {
        currentQuestionIndex--;
        updateQuestionDisplay();
        resetTimer();
    }
}

// تحسين عرض النتائج
function showResults() {
    const resultsContainer = document.getElementById('results');
    const percentage = (score / currentQuestions.length) * 100;
    const timeSpent = QUIZ_TIME - timeLeft;
    
    resultsContainer.innerHTML = `
        <div class="results-container">
            <div class="results-header">
                <div class="trophy-animation">
                    <i class="fas fa-trophy ${percentage >= 70 ? 'gold' : percentage >= 50 ? 'silver' : 'bronze'}"></i>
                </div>
                <h2>نتائج الاختبار</h2>
            </div>
            
            <div class="score-circle-container">
                <div class="score-circle ${getScoreClass(percentage)}">
                    <div class="score-number">${percentage.toFixed(1)}%</div>
                    <div class="score-label">${getScoreMessage(percentage)}</div>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card correct">
                    <i class="fas fa-check-circle"></i>
                    <div class="stat-number">${score}</div>
                    <div class="stat-label">إجابات صحيحة</div>
                </div>
                <div class="stat-card incorrect">
                    <i class="fas fa-times-circle"></i>
                    <div class="stat-number">${currentQuestions.length - score}</div>
                    <div class="stat-label">إجابات خاطئة</div>
                </div>
                <div class="stat-card time">
                    <i class="fas fa-clock"></i>
                    <div class="stat-number">${formatTime(timeSpent)}</div>
                    <div class="stat-label">الوقت المستغرق</div>
                </div>
                <div class="stat-card accuracy">
                    <i class="fas fa-bullseye"></i>
                    <div class="stat-number">${(score / currentQuestions.length * 100).toFixed(1)}%</div>
                    <div class="stat-label">نسبة الدقة</div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="button primary-button" onclick="showAnswersReview()">
                    <i class="fas fa-list"></i>
                    مراجعة الإجابات
                </button>
                <button class="button secondary-button" onclick="restartQuiz()">
                    <i class="fas fa-redo"></i>
                    إعادة الاختبار
                </button>
                <button class="button success-button" onclick="shareResults()">
                    <i class="fas fa-share"></i>
                    مشاركة النتيجة
                </button>
            </div>

            <div class="performance-summary">
                <h3>تحليل الأداء</h3>
                <div class="performance-details">
                    ${generatePerformanceAnalysis(percentage, timeSpent)}
                </div>
            </div>
        </div>
    `;

    // إضافة الأنماط الجديدة
    const styles = `
        .results-container {
            background: linear-gradient(135deg, #ffffff 0%, #f5f7fa 100%);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            margin: 0 auto;
        }

        .results-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .trophy-animation {
            font-size: 4rem;
            margin-bottom: 1rem;
            animation: bounceIn 1s ease;
        }

        .trophy-animation .gold { color: #FFD700; }
        .trophy-animation .silver { color: #C0C0C0; }
        .trophy-animation .bronze { color: #CD7F32; }

        .score-circle-container {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
        }

        .score-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%);
            color: white;
            box-shadow: 0 10px 20px rgba(74, 144, 226, 0.3);
            animation: scaleIn 0.5s ease;
        }

        .score-number {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .score-label {
            font-size: 1.2rem;
            text-align: center;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card i {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .stat-card.correct i { color: #48bb78; }
        .stat-card.incorrect i { color: #f56565; }
        .stat-card.time i { color: #4a90e2; }
        .stat-card.accuracy i { color: #805ad5; }

        .stat-number {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 2rem;
        }

        .button {
            padding: 1rem 2rem;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .performance-summary {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            margin-top: 2rem;
        }

        .performance-summary h3 {
            color: #2d3748;
            margin-bottom: 1rem;
            text-align: center;
        }

        .performance-details {
            color: #4a5568;
            line-height: 1.6;
        }

        @keyframes bounceIn {
            0% { transform: scale(0); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        @keyframes scaleIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
    `;

    // إضافة الأنماط إلى الصفحة
    const styleSheet = document.createElement('style');
    styleSheet.textContent = styles;
    document.head.appendChild(styleSheet);

    resultsContainer.classList.remove('hidden');
    document.getElementById('quiz-container').classList.add('hidden');
}

// دالة لتوليد تحليل الأداء
function generatePerformanceAnalysis(percentage, timeSpent) {
    let analysis = '';
    
    if (percentage >= 90) {
        analysis = 'أداء ممتاز! لديك معرفة عميقة بتاريخ الأندلس والمغرب.';
    } else if (percentage >= 70) {
        analysis = 'أداء جيد جداً! تحتاج فقط إلى مراجعة بعض التفاصيل.';
    } else if (percentage >= 50) {
        analysis = 'أداء مقبول. نوصي بمزيد من الدراسة لتحسين معرفتك.';
    } else {
        analysis = 'تحتاج إلى مزيد من الدراسة. لا تستسلم!';
    }

    const timeAnalysis = timeSpent < QUIZ_TIME * 0.5 ? 
        'أكملت الاختبار بسرعة جيدة!' : 
        'خذ وقتك في المرة القادمة للتفكير في الإجابات.';

    return `
        <p>${analysis}</p>
        <p>${timeAnalysis}</p>
        <p>واصل التعلم واكتشاف المزيد عن هذا التاريخ الغني!</p>
    `;
}

// تحسين رسالة النتيجة
function getScoreMessage(percentage) {
    if (percentage >= 90) return 'ممتاز!';
    if (percentage >= 80) return 'جيد جداً!';
    if (percentage >= 70) return 'جيد!';
    if (percentage >= 60) return 'مقبول';
    return 'حاول مرة أخرى';
}

// تحسين مشاركة النتائج
function shareResults() {
    const percentage = (score / currentQuestions.length) * 100;
    const text = `🏆 حصلت على ${percentage.toFixed(1)}% في اختبار تاريخ الأندلس والمغرب!\n📚 جرب الاختبار الآن وتحدى معرفتك!`;
    
    if (navigator.share) {
        navigator.share({
            title: '🎯 نتيجة اختبار تاريخ الأندلس والمغرب',
            text: text,
            url: window.location.href
        }).catch(console.error);
    } else {
        const textarea = document.createElement('textarea');
        textarea.value = text;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        
        // إظهار رسالة نجاح النسخ
        const notification = document.createElement('div');
        notification.className = 'copy-notification';
        notification.innerHTML = `
            <i class="fas fa-check"></i>
            تم نسخ النتيجة إلى الحافظة!
        `;
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.remove();
        }, 3000);
    }
}

// تنسيق الوقت
function formatTime(seconds) {
    const minutes = Math.floor(seconds / 60);
    const remainingSeconds = seconds % 60;
    return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
}

// تحديد لون دائرة النتيجة
function getScoreClass(percentage) {
    if (percentage >= 90) return 'excellent';
    if (percentage >= 75) return 'very-good';
    if (percentage >= 60) return 'good';
    return 'needs-improvement';
}

// تحميل الأسئلة
function loadQuestions() {
    try {
        // التحقق من صحة البيانات
        if (!questions || !questions.mcqQuestions || !questions.trueFalseQuestions) {
            throw new Error('تنسيق البيانات غير صحيح');
        }

        initializeSetup();
        
        // تحديث إحصائيات الأسئلة
        updateQuestionStats();
    } catch (error) {
        console.error('Error loading questions:', error);
        showError('عذراً، حدث خطأ في تحميل الأسئلة. يرجى تحديث الصفحة والمحاولة مرة أخرى.');
    }
}

// عرض رسالة خطأ
function showError(message) {
    const errorDiv = document.createElement('div');
    errorDiv.className = 'error-message';
    errorDiv.innerHTML = `
        <i class="fas fa-exclamation-circle"></i>
        <p>${message}</p>
        <button onclick="location.reload()" class="retry-button">
            <i class="fas fa-redo"></i>
            حاول مرة أخرى
        </button>
    `;
    
    document.querySelector('.loading-indicator')?.remove();
    document.querySelector('.container').appendChild(errorDiv);
}

// تحديث إحصائيات الأسئلة
function updateQuestionStats() {
    const totalQuestions = questions.mcqQuestions.length + questions.trueFalseQuestions.length;
    const statsContainer = document.createElement('div');
    statsContainer.className = 'stats-container';
    statsContainer.innerHTML = `
        <div class="stat-item">
            <div class="stat-icon"><i class="fas fa-question-circle"></i></div>
            <div class="stat-number">${totalQuestions}</div>
            <div class="stat-label">إجمالي الأسئلة</div>
        </div>
        <div class="stat-item">
            <div class="stat-icon"><i class="fas fa-list"></i></div>
            <div class="stat-number">${questions.mcqQuestions.length}</div>
            <div class="stat-label">اختيار من متعدد</div>
        </div>
        <div class="stat-item">
            <div class="stat-icon"><i class="fas fa-check-circle"></i></div>
            <div class="stat-number">${questions.trueFalseQuestions.length}</div>
            <div class="stat-label">صح وخطأ</div>
        </div>
    `;
    
    document.querySelector('.description').insertAdjacentElement('afterend', statsContainer);
}

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

// تحسين وظيفة اختيار الأسئلة
function selectQuestions() {
    const count = parseInt(document.getElementById('questionCount').value);
    const type = document.getElementById('questionType').value;
    
    try {
        let selectedQuestions = [];
        
        if (type === 'mcq' || type === 'all') {
            selectedQuestions = selectedQuestions.concat([...questions.mcqQuestions]);
        }
        
        if (type === 'tf' || type === 'all') {
            selectedQuestions = selectedQuestions.concat([...questions.trueFalseQuestions]);
        }
        
        if (selectedQuestions.length < count) {
            throw new Error(`عذراً، لا يوجد عدد كافٍ من الأسئلة (${selectedQuestions.length} متوفرة)`);
        }
        
        selectedQuestions = shuffleArray(selectedQuestions);
        return selectedQuestions.slice(0, count);
    } catch (error) {
        showError(error.message);
        return null;
    }
}

function showQuestion() {
    const question = currentQuestions[currentQuestionIndex];
    const questionText = document.getElementById('question-text');
    const optionsContainer = document.getElementById('options-container');
    const questionNumber = document.getElementById('question-number');
    const categoryBadge = document.getElementById('question-category');
    
    // إعادة تعيين الحالة
    document.getElementById('feedback').classList.add('hidden');
    document.getElementById('next-button').classList.add('hidden');
    optionsContainer.innerHTML = '';
    
    // تحديث معلومات السؤال
    questionText.textContent = question.question;
    questionNumber.textContent = `السؤال ${currentQuestionIndex + 1} من ${currentQuestions.length}`;
    categoryBadge.textContent = question.options ? 'اختيار من متعدد' : 'صح وخطأ';
    
    // إنشاء الخيارات
    if (question.options) {
        question.options.forEach((option, index) => {
            const button = createOptionButton(option, index);
            optionsContainer.appendChild(button);
        });
    } else {
        ['صح', 'خطأ'].forEach((option, index) => {
            const button = createOptionButton(option, index, true);
            optionsContainer.appendChild(button);
        });
    }
    
    // إعادة تشغيل المؤقت
    resetTimer();
}

function createOptionButton(text, index, isTrueFalse = false) {
    const button = document.createElement('button');
    button.className = 'option';
    button.innerHTML = `
        <span class="option-number">${String.fromCharCode(65 + index)}</span>
        <span class="option-text">${text}</span>
    `;
    button.onclick = () => checkAnswer(isTrueFalse ? text === 'صح' : text);
    return button;
}

function checkAnswer(selectedAnswer) {
    const question = currentQuestions[currentQuestionIndex];
    const feedback = document.getElementById('feedback');
    const options = document.querySelectorAll('.option');
    
    // تعطيل جميع الخيارات
    options.forEach(option => option.disabled = true);
    
    // التحقق من صحة الإجابة
    const isCorrect = question.options ? 
        selectedAnswer === question.answer :
        selectedAnswer === question.answer;
    
    // تحديث النتيجة وإظهار التغذية الراجعة
    if (isCorrect) {
        score++;
        feedback.textContent = '✨ إجابة صحيحة! أحسنت!';
        feedback.className = 'feedback correct';
    } else {
        feedback.textContent = `❌ إجابة خاطئة. الإجابة الصحيحة هي: ${question.answer}`;
        feedback.className = 'feedback incorrect';
    }
    
    // حفظ إجابة المستخدم
    userAnswers[currentQuestionIndex] = {
        question: question.question,
        userAnswer: selectedAnswer,
        correctAnswer: question.answer,
        isCorrect
    };
    
    feedback.classList.remove('hidden');
    document.getElementById('next-button').classList.remove('hidden');
    updateProgress();
}

function nextQuestion() {
    if (currentQuestionIndex < currentQuestions.length - 1) {
        currentQuestionIndex++;
        showQuestion();
    } else {
        showResults();
    }
}

function updateProgress() {
    const progressNumber = document.getElementById('progress-number');
    const progressFill = document.querySelector('.progress-fill');
    const progress = ((currentQuestionIndex + 1) / currentQuestions.length) * 100;
    
    progressNumber.textContent = `${currentQuestionIndex + 1}/${currentQuestions.length}`;
    progressFill.style.width = `${progress}%`;
}

function startTimer() {
    timeLeft = QUIZ_TIME;
    updateTimerDisplay();
    
    timer = setInterval(() => {
        timeLeft--;
        updateTimerDisplay();
        
        if (timeLeft <= 0) {
            clearInterval(timer);
            checkAnswer(null); // تسجيل إجابة فارغة عند انتهاء الوقت
        }
    }, 1000);
}

function resetTimer() {
    clearInterval(timer);
    startTimer();
}

function updateTimerDisplay() {
    const minutes = Math.floor(timeLeft / 60);
    const seconds = timeLeft % 60;
    document.getElementById('time-remaining').textContent = 
        `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
}

function showAnswersReview() {
    const answersReview = document.getElementById('answers-review');
    const answersList = document.getElementById('answers-list');
    
    answersList.innerHTML = userAnswers.map((answer, index) => `
        <div class="review-item ${answer.isCorrect ? 'correct' : 'incorrect'}">
            <div class="review-question">
                <span class="question-number">${index + 1}</span>
                ${answer.question}
            </div>
            <div class="review-answers">
                <div class="user-answer">
                    <span class="label">إجابتك:</span>
                    <span class="answer ${answer.isCorrect ? 'correct' : 'incorrect'}">
                        ${answer.userAnswer || 'لم تتم الإجابة'}
                    </span>
                </div>
                ${!answer.isCorrect ? `
                    <div class="correct-answer">
                        <span class="label">الإجابة الصحيحة:</span>
                        <span class="answer correct">${answer.correctAnswer}</span>
                    </div>
                ` : ''}
            </div>
        </div>
    `).join('');
    
    answersReview.classList.remove('hidden');
}

function closeAnswersReview() {
    document.getElementById('answers-review').classList.add('hidden');
}

function restartQuiz() {
    document.getElementById('results').classList.add('hidden');
    document.getElementById('setup-container').classList.remove('hidden');
    clearInterval(timer);
}

// تحديث تصميم الواجهة
document.addEventListener('DOMContentLoaded', function() {
    const container = document.querySelector('.container');
    container.style.maxWidth = '800px';
    container.style.margin = '0 auto';
    container.style.padding = '20px';
    container.style.fontFamily = "'Noto Kufi Arabic', sans-serif";
    
    // تحديث أزرار الخيارات
    const options = document.querySelectorAll('.option');
    options.forEach(option => {
        option.style.transition = 'all 0.3s ease';
        option.style.transform = 'scale(1)';
        option.addEventListener('mouseover', () => {
            option.style.transform = 'scale(1.05)';
        });
        option.addEventListener('mouseout', () => {
            option.style.transform = 'scale(1)';
        });
    });
    
    // تحديث شريط التقدم
    const progressBar = document.querySelector('.progress-bar');
    progressBar.style.height = '10px';
    progressBar.style.borderRadius = '5px';
    progressBar.style.overflow = 'hidden';
    
    // تحسين أزرار التنقل
    const navigationButtons = document.querySelectorAll('button:not(.option)');
    navigationButtons.forEach(button => {
        button.style.transition = 'all 0.3s ease';
        button.style.transform = 'scale(1)';
        button.addEventListener('mouseover', () => {
            button.style.transform = 'scale(1.05)';
        });
        button.addEventListener('mouseout', () => {
            button.style.transform = 'scale(1)';
        });
    });
});

// إضافة الأنماط الإضافية
const additionalStyles = `
  .quiz-header {
    text-align: center;
    margin-bottom: 30px;
    color: #2d3748;
  }

  .quiz-header h1 {
    font-size: 2em;
    margin-bottom: 10px;
  }

  .quiz-header p {
    color: #4a5568;
  }

  .category-badge {
    display: inline-block;
    padding: 5px 10px;
    background: #4a90e2;
    color: white;
    border-radius: 15px;
    font-size: 0.9em;
    margin-bottom: 15px;
  }

  .option-number {
    background: #4a90e2;
    color: white;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 10px;
  }

  .results-container {
    text-align: center;
    padding: 30px;
    background: white;
    border-radius: 15px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }

  .score-circle {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    border: 10px solid #4a90e2;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
    font-size: 2em;
    color: #2d3748;
  }

  .review-item {
    background: white;
    padding: 15px;
    border-radius: 10px;
    margin-bottom: 15px;
    border-left: 5px solid;
  }

  .review-item.correct {
    border-color: #48bb78;
  }

  .review-item.incorrect {
    border-color: #f56565;
  }

  .answer-label {
    font-weight: bold;
    color: #4a5568;
    margin-right: 10px;
  }

  .timer-container {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 20px;
  }

  .timer-icon {
    margin-right: 10px;
    color: #4a90e2;
  }

  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
  }

  .option:active {
    animation: pulse 0.3s;
  }
`;

// إضافة الأنماط الإضافية
document.addEventListener('DOMContentLoaded', function() {
    const additionalStyleSheet = document.createElement('style');
    additionalStyleSheet.textContent = additionalStyles;
    document.head.appendChild(additionalStyleSheet);
});

// بدء تحميل الأسئلة عند تحميل الصفحة
document.addEventListener('DOMContentLoaded', loadQuestions);

// تحسين وظائف الأزرار
function initializeButtons() {
    // زر بدء الاختبار
    const startButton = document.getElementById('start-button');
    if (startButton) {
        startButton.addEventListener('click', () => {
            validateAndStartQuiz();
        });
    }

    // زر السؤال التالي
    const nextButton = document.getElementById('next-button');
    if (nextButton) {
        nextButton.addEventListener('click', () => {
            handleNextQuestion();
        });
    }

    // زر إعادة الاختبار
    const restartButton = document.getElementById('restart-button');
    if (restartButton) {
        restartButton.addEventListener('click', () => {
            handleQuizRestart();
        });
    }

    // زر عرض الإجابات
    const showAnswersButton = document.getElementById('show-answers');
    if (showAnswersButton) {
        showAnswersButton.addEventListener('click', () => {
            showAnswersReview();
        });
    }

    // زر إغلاق المراجعة
    const closeReviewButton = document.getElementById('close-review');
    if (closeReviewButton) {
        closeReviewButton.addEventListener('click', () => {
            hideAnswersReview();
        });
    }

    // إضافة اختصارات لوحة المفاتيح
    document.addEventListener('keydown', handleKeyboardShortcuts);
}

// التحقق من الإعدادات وبدء الاختبار
function validateAndStartQuiz() {
    const questionCount = document.getElementById('questionCount').value;
    const questionType = document.getElementById('questionType').value;
    const category = document.getElementById('category').value;

    if (!questionCount || !questionType) {
        showError('الرجاء اختيار عدد الأسئلة ونوعها');
        return;
    }

    // تعطيل الزر أثناء التحميل
    const startButton = document.getElementById('start-button');
    startButton.disabled = true;
    startButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> جاري التحميل...';

    try {
        // تجهيز الأسئلة
        currentQuestions = selectQuestions(parseInt(questionCount), questionType, category);
        if (!currentQuestions || currentQuestions.length === 0) {
            throw new Error('لم يتم العثور على أسئلة كافية');
        }

        // بدء الاختبار
        startQuiz();
    } catch (error) {
        showError(error.message);
        startButton.disabled = false;
        startButton.innerHTML = '<i class="fas fa-play"></i> بدء الاختبار';
    }
}

// معالجة السؤال التالي
function handleNextQuestion() {
    const nextButton = document.getElementById('next-button');
    nextButton.disabled = true;

    // تأثير بصري للانتقال
    const questionCard = document.querySelector('.question-card');
    questionCard.style.opacity = '0';

    setTimeout(() => {
        if (currentQuestionIndex < currentQuestions.length - 1) {
            currentQuestionIndex++;
            showQuestion();
            updateProgress();
        } else {
            showResults();
        }
        questionCard.style.opacity = '1';
        nextButton.disabled = false;
    }, 300);
}

// إعادة تشغيل الاختبار
function handleQuizRestart() {
    // تأكيد إعادة الاختبار
    if (confirm('هل أنت متأكد من رغبتك في إعادة الاختبار؟')) {
        resetQuizState();
        document.getElementById('results').classList.add('hidden');
        document.getElementById('setup-container').classList.remove('hidden');
        
        // إعادة تعيين الأزرار
        const startButton = document.getElementById('start-button');
        startButton.disabled = false;
        startButton.innerHTML = '<i class="fas fa-play"></i> بدء الاختبار';
    }
}

// معالجة اختصارات لوحة المفاتيح
function handleKeyboardShortcuts(event) {
    // التأكد من عدم وجود حقول نصية نشطة
    if (document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'TEXTAREA') {
        return;
    }

    switch (event.key) {
        case 'Enter':
        case ' ':
            // زر البدء أو التالي
            if (!document.getElementById('quiz-container').classList.contains('hidden')) {
                const nextButton = document.getElementById('next-button');
                if (!nextButton.classList.contains('hidden') && !nextButton.disabled) {
                    nextButton.click();
                }
            }
            break;
        case 'Escape':
            // إغلاق المراجعة
            if (!document.getElementById('answers-review').classList.contains('hidden')) {
                hideAnswersReview();
            }
            break;
        case '1':
        case '2':
        case '3':
        case '4':
            // اختيار الإجابة باستخدام الأرقام
            const options = document.querySelectorAll('.option:not([disabled])');
            const index = parseInt(event.key) - 1;
            if (options[index]) {
                options[index].click();
            }
            break;
    }
}

// عرض رسالة خطأ
function showError(message) {
    const errorDiv = document.createElement('div');
    errorDiv.className = 'error-message';
    errorDiv.innerHTML = `
        <i class="fas fa-exclamation-circle"></i>
        <p>${message}</p>
    `;
    
    // إزالة رسائل الخطأ السابقة
    document.querySelectorAll('.error-message').forEach(el => el.remove());
    
    // إضافة رسالة الخطأ الجديدة
    document.querySelector('.setup-card').appendChild(errorDiv);
    
    // إخفاء رسالة الخطأ بعد 3 ثواني
    setTimeout(() => {
        errorDiv.remove();
    }, 3000);
}

// إعادة تعيين حالة الاختبار
function resetQuizState() {
    currentQuestions = [];
    currentQuestionIndex = 0;
    score = 0;
    userAnswers = [];
    clearInterval(timer);
}

// إخفاء مراجعة الإجابات
function hideAnswersReview() {
    document.getElementById('answers-review').classList.add('hidden');
}

// تحديث حالة الأزرار
function updateButtonStates() {
    const nextButton = document.getElementById('next-button');
    const showAnswersButton = document.getElementById('show-answers');
    const restartButton = document.getElementById('restart-button');
    
    if (nextButton) {
        nextButton.disabled = !userAnswers[currentQuestionIndex];
    }
    
    if (showAnswersButton) {
        showAnswersButton.disabled = userAnswers.length === 0;
    }
    
    if (restartButton) {
        restartButton.disabled = false;
    }
}

// تهيئة الأزرار عند تحميل الصفحة
document.addEventListener('DOMContentLoaded', initializeButtons);

// ... باقي الكود كما هو